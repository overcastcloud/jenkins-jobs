- job:
    name: jenkins-jobs
    scm:
      - git:
          url: https://github.com/overcastde/jenkins-jobs
          branch: master

    triggers:
      - pollscm: "H/5 * * * *"

- job-template:
    name: "{name}-upstream-master"
    scm:
      - git:
          url: "https://github.com/openstack/{name}"
          branch: master

    triggers:
      - pollscm: "H/15 * * * *"

    builders:
      - shell: |
          #!/bin/bash
          virtualenv venv
          . venv/bin/activate
          pip install tox
          tox -e py27

- project:
    name: nova
    jobs:
      - "{name}-upstream-master"

- project:
    name: glance
    jobs:
      - "{name}-upstream-master"

- project:
    name: keystone
    jobs:
      - "{name}-upstream-master"

- project:
    name: cinder
    jobs:
      - "{name}-upstream-master"

- job:
    name: schmenkins
    scm:
      - git:
          url: https://github.com/Linux2Go/schmenkins.git
    builders:
      - shell: |
         #!/bin/bash
         virtualenv venv
         . venv/bin/activate
         python setup.py install
         pip install nose mock
         nosetests -v .
      - shell: |
         #!/bin/bash
         python setup.py install
